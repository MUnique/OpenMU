@page "/users"
@using MUnique.OpenMU.DataModel
@using MUnique.OpenMU.DataModel.Entities
@using MUnique.OpenMU.Web.AdminPanel.Properties


@inject IUserService UserService;
@{
  var title = @MUnique.OpenMU.Web.AdminPanel.Properties.Resources.AdminUsers;
}
<PageTitle>OpenMU: @title</PageTitle>
<Breadcrumb IsFirstFromRoot="true" Caption="@title"/>
<h1>@title</h1>

<div>
    <table>
        <thead>
        <th class="col-10">@typeof(Account).GetPropertyCaption(nameof(Account.LoginName))</th>
        <th class="col-1">@Resources.Actions</th>
        <th class="col-1"></th>
        </thead>
        <tbody>
        @{ var users = this.UserService.Users; }
        @foreach (var user in users)
        {
            <tr>
                <td>@user</td>
                <td>
                    <button type="button" class="btn btn-sm btn-primary" @onclick="async () => await this.UserService.ChangePasswordInModalDialogAsync(user)">@Resources.ChangePassword</button>
                </td>
                <td>
                    @if (users.Count > 1)
                    {
                        <button type="button" class="btn btn-sm btn-danger" @onclick="async () => await this.UserService.DeleteUserAsync(user)">@Resources.Delete</button>
                    }
                </td>
            </tr>
        }
        </tbody>
        
        <tfoot>
            <td><button type="button" class="btn btn-sm btn-success" @onclick="@this.UserService.CreateNewInModalDialogAsync">@Resources.CreateUser</button></td>
            <td></td>
            <td></td>
        </tfoot>
    </table>
</div>
